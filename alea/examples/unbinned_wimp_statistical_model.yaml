parameter_definition:
  wimp_mass:
    nominal_value: 50
    fittable: false
    description: WIMP mass in GeV/c^2

  livetime_0:
    nominal_value: 0.2
    fittable: false
    description: Livetime of SR0 in years

  livetime_1:
    nominal_value: 1.0
    fittable: false
    description: Livetime of SR1 in years

  wimp_rate_multiplier:
    nominal_value: 1.0
    ptype: rate
    fittable: true
    fit_limits:
      - 0
      - null

  er_rate_multiplier:
    nominal_value: 1.0
    ptype: rate
    uncertainty: 0.2
    relative_uncertainty: true
    fittable: true
    fit_limits:
      - 0
      - null
    fit_guess: 1.0

  # er_band_shift:
  #   nominal_value: 0
  #   ptype: shape
  #   uncertainty: scipy.stats.uniform(loc=-1, scale=2)
  #   relative_uncertainty: false
  #   fittable: true
  #   blueice_anchors:
  #     - -1
  #     - 0
  #     - 1
  #   fit_limits:
  #     - -1
  #     - 1
  #   description: ER band shape parameter (shifts the ER band up and down)


likelihood_terms:
# SR0
  - name: sr0
    default_source_class: binference.template_source.TemplateSource
    likelihood_type: blueice.likelihood.UnbinnedLogLikelihood
    analysis_space:
      - "cs1": 'np.arange(0, 102, 2)'
      - "cs2": 'np.geomspace(100, 100000, 51)'
    in_events_per_bin: true
    parameters:
      - livetime_0
    slice_args: {}
    sources:
    - histname: er_template
      parameters:
        - er_rate_multiplier
        - er_band_shift
      templatepath: examples/er_template.h5
      histogram_scale_factor: 1

    - histname: wimp50gev_template
      parameters:
        - wimp_rate_multiplier
        - wimp_mass
      templatepath: examples/wimp50gev_template.h5
      apply_efficiency: False
      efficiency_name: 'signal_eff'  # TODO: Check

# SR0
  - name: sr1
    default_source_class: binference.template_source.TemplateSource
    likelihood_type: blueice.likelihood.UnbinnedLogLikelihood
    analysis_space:
      - "cs1": 'np.arange(0, 102, 2)'
      - "cs2": 'np.geomspace(100, 100000, 51)'
    in_events_per_bin: true
    parameters:
      - livetime_1
    slice_args: {}
    sources:
    - histname: er_template
      parameters:
        - er_rate_multiplier
        - er_band_shift
      templatepath: examples/er_template.h5
      histogram_scale_factor: 2

    - histname: wimp50gev_template
      parameters:
        - wimp_rate_multiplier
        - wimp_mass
      templatepath: examples/wimp50gev_template.h5
      apply_efficiency: False
      efficiency_name: 'signal_eff'  # TODO: Check